<<<<<<< HEAD
# Pythonソケットプログラミング

## 条件
1. TCPを使ってTCP/IPのレイヤーアーキテクチャを模擬したプログラムの作成
- クライアントとサーバを作成
- クライアントでは2つの引数をとり，第一引数で第2レイヤーで使用するプロトコルを指定し，第二引数でサーバに送信するファイル名を指定する.
- クライアントでは指定された第2レイヤーのプロトコルを使用し，バイナリとしてファイルを読み込んでサーバに送信する.
- サーバはプロトコルを解析し，受け取ったデータを16進数で標準出力に表示する.


- 3レイヤーで作成し第2レイヤーでは2種類のプロトコルを扱えるようにする
- Data の最大値は1024バイトと仮定して良い.
- 各レイヤーのヘッダは図1に従う.
- 不正なパケットと判断された場合(第2レイヤで行う)には即座に処理を中止する.


1. 各プロトコルのフィールドと意味は表1~3の通り.
- DIPヘッダのtypeで上位プロトコルの種類を示し，このフィールドを読み取ることでDTCPかDUDPかを判定することができる.
- DUDPではデータの改竄や破損をチェックせずそのままプロトコルに処理を委譲するが，DTCPではペイロードのMD5をチェックし，digestフィールドの値と比較することで改竄を確認し，改竄されている場合には即座に処理を中止する.


- DIPヘッダ

|フィールド|長さ|意味|
|:--|:--|:--|
|type|4byte|上位プロトコルタイプを表す|
|version|4byte|DIPバージョンを示す|
|ttl|4byte|Time to Live|

- DTCPヘッダ

|フィールド|長さ|意味|
|:--|:--|:--|
|type|4byte|上位プロトコルタイプを表す|
|len|4byte|ペイロードの長さ|
|digest|16byte|ペイロードのMD5値|

- DUDPヘッダ

|フィールド|長さ|意味|
|:--|:--|:--|
|type|4byte|上位プロトコルタイプを表す|
|len|4byte|ペイロードの長さ|

## 構造
### Client
1. ファイル読み込み
- 長さ(size)の取得
- layer3処理
- layer2処理
- layer1処理
- ソケット通信経路の確保
- 転送

### Server
1. ソケット通信経路の確保
- データ受信
- layer1処理
- layer2処理
- layer3処理
